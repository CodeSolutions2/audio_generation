<!DOCTYPE html>
<html>
<head></head>
<body>    


<audio controls=true id="audio_input_display_js" preload="auto" style="display:block"></audio>
  
<button id="filter_noise" onclick="filter_noise()" style="display:block">filter_noise</button>

<script>


var audioContext = new (window.AudioContext || window.webkitAudioContext)();

// https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/volume
document.getElementById("audio_input_display_js").volume = 0.1; 
  
async function filter_noise() {



    // Play the music/audio file
				// Transform audiodata into correct format for source.buffer
				// https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/createBufferSource
				let channels = 2; 
				let frameCount = decoded_audiobuffer.length; // sample_length
				let sampleRate = decoded_audiobuffer.sampleRate; // sample_rate
  
				const myArrayBuffer = audioContext.createBuffer(channels, frameCount, sampleRate);
				
				// Fill the buffer with audio data
				const channelData_test = myArrayBuffer.getChannelData(0); // Access the channel data for the first channel
				
				// One knows the length of channelData_test because of the designated sample_length and sample_rate
				for (let i = 0; i < channelData_test.length; i++) {
					channelData_test[i] = channelData[i];
				}
				
				var source = audioContext.createBufferSource(document.getElementById("audio_input_display_js"));
				source.buffer = myArrayBuffer;
				source.id = "audio_source_input_display_js";
				
				source.connect(audioContext.destination);

				//  To play an entire `source.buffer` using `source` in JavaScript, you can set the `source.start(0)` method to start playing the audio from the beginning.
				source.start(0); // WORKS!!

				// The audioContext via the audioElement can play Float32Array data.

}


</script>

  </body>
</html>
